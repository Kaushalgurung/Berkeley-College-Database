-- Generated by Oracle SQL Developer Data Modeler 21.4.1.349.1605
--   at:        2022-03-10 21:07:27 NPT
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g



DROP TABLE address CASCADE CONSTRAINTS;

DROP TABLE assignment CASCADE CONSTRAINTS;

DROP TABLE department CASCADE CONSTRAINTS;

DROP TABLE fee_payment CASCADE CONSTRAINTS;

DROP TABLE module CASCADE CONSTRAINTS;

DROP TABLE module_result CASCADE CONSTRAINTS;

DROP TABLE person CASCADE CONSTRAINTS;

DROP TABLE person_address CASCADE CONSTRAINTS;

DROP TABLE student CASCADE CONSTRAINTS;

DROP TABLE student_attendence CASCADE CONSTRAINTS;

DROP TABLE student_module CASCADE CONSTRAINTS;

DROP TABLE teacher CASCADE CONSTRAINTS;

DROP TABLE teacher_module CASCADE CONSTRAINTS;

-- predefined type, no DDL - MDSYS.SDO_GEOMETRY

-- predefined type, no DDL - XMLTYPE

CREATE TABLE address (
    address_id        VARCHAR2(10 CHAR) NOT NULL,
    country           VARCHAR2(20 CHAR) NOT NULL,
    province_or_state VARCHAR2(20 CHAR),
    city              VARCHAR2(20 CHAR),
    street_no         INTEGER,
    street_name       VARCHAR2(40 CHAR)
);

ALTER TABLE address ADD CONSTRAINT address_pk PRIMARY KEY ( address_id );

CREATE TABLE assignment (
    assignment_id   VARCHAR2(10 CHAR) NOT NULL,
    assignment_type VARCHAR2(40 CHAR) NOT NULL,
    department_id   VARCHAR2(10 CHAR) NOT NULL
);

ALTER TABLE assignment ADD CONSTRAINT assignment_pk PRIMARY KEY ( assignment_id );

CREATE TABLE department (
    department_id      VARCHAR2(10 CHAR) NOT NULL,
    department_name    VARCHAR2(40 CHAR) NOT NULL,
    department_contact VARCHAR2(10 CHAR)
);

ALTER TABLE department ADD CONSTRAINT department_pk PRIMARY KEY ( department_id );

CREATE TABLE fee_payment (
    "Invoice_no."  NUMBER NOT NULL,
    student_id     VARCHAR2(10 CHAR) NOT NULL,
    department_id  VARCHAR2(10 CHAR) NOT NULL,
    amount         NUMBER(15, 2) NOT NULL,
    payment_status VARCHAR2(10 CHAR)
);

ALTER TABLE fee_payment ADD CONSTRAINT fee_payment_pk PRIMARY KEY ( "Invoice_no." );

CREATE TABLE module (
    module_code  VARCHAR2(10 CHAR) NOT NULL,
    module_name  VARCHAR2(50 CHAR) NOT NULL,
    credit_hours INTEGER NOT NULL
);

ALTER TABLE module ADD CONSTRAINT module_pk PRIMARY KEY ( module_code );

CREATE TABLE module_result (
    result_id     VARCHAR2(10 CHAR) NOT NULL,
    assignment_id VARCHAR2(10 CHAR) NOT NULL,
    module_code   VARCHAR2(10 CHAR) NOT NULL,
    student_id    VARCHAR2(10 CHAR) NOT NULL,
    grade         VARCHAR2(10 CHAR),
    status        VARCHAR2(10 CHAR)
);

ALTER TABLE module_result
    ADD CONSTRAINT module_result_pk PRIMARY KEY ( assignment_id,
                                                  student_id,
                                                  module_code,
                                                  result_id );

CREATE TABLE person (
    person_id   VARCHAR2(10 CHAR) NOT NULL,
    first_name  VARCHAR2(20 CHAR) NOT NULL,
    last_name   VARCHAR2(20 CHAR) NOT NULL,
    dateofbirth DATE NOT NULL,
    gender      VARCHAR2(10 CHAR) NOT NULL,
    contact_no  VARCHAR2(10 CHAR) NOT NULL,
    email       VARCHAR2(50 CHAR) NOT NULL
);

ALTER TABLE person ADD CONSTRAINT person_pk PRIMARY KEY ( person_id );

CREATE TABLE person_address (
    person_id  VARCHAR2(10 CHAR) NOT NULL,
    address_id VARCHAR2(10 CHAR) NOT NULL
);

ALTER TABLE person_address ADD CONSTRAINT person_address_pk PRIMARY KEY ( person_id,
                                                                          address_id );

CREATE TABLE student (
    student_id    VARCHAR2(10 CHAR) NOT NULL,
    enrolled_year VARCHAR2(20 CHAR)
);

ALTER TABLE student ADD CONSTRAINT student_pk PRIMARY KEY ( student_id );

CREATE TABLE student_attendence (
    attendence_id VARCHAR2(10 CHAR) NOT NULL,
    student_id    VARCHAR2(10 CHAR) NOT NULL,
    attendence    INTEGER NOT NULL
);

ALTER TABLE student_attendence ADD CONSTRAINT student_attendence_pk PRIMARY KEY ( attendence_id );

CREATE TABLE student_module (
    student_id  VARCHAR2(10 CHAR) NOT NULL,
    module_code VARCHAR2(10 CHAR) NOT NULL
);

ALTER TABLE student_module ADD CONSTRAINT student_module_pk PRIMARY KEY ( student_id,
                                                                          module_code );

CREATE TABLE teacher (
    teacher_id    VARCHAR2(10 CHAR) NOT NULL,
    qualification VARCHAR2(50 CHAR) NOT NULL
);

ALTER TABLE teacher ADD CONSTRAINT teacher_pk PRIMARY KEY ( teacher_id );

CREATE TABLE teacher_module (
    teacher_id  VARCHAR2(10 CHAR) NOT NULL,
    module_code VARCHAR2(10 CHAR) NOT NULL
);

ALTER TABLE teacher_module ADD CONSTRAINT teacher_module_pk PRIMARY KEY ( teacher_id,
                                                                          module_code );

ALTER TABLE assignment
    ADD CONSTRAINT assignment_department_fk FOREIGN KEY ( department_id )
        REFERENCES department ( department_id );

ALTER TABLE fee_payment
    ADD CONSTRAINT fee_payment_department_fk FOREIGN KEY ( department_id )
        REFERENCES department ( department_id );

ALTER TABLE fee_payment
    ADD CONSTRAINT fee_payment_student_fk FOREIGN KEY ( student_id )
        REFERENCES student ( student_id );

ALTER TABLE module_result
    ADD CONSTRAINT module_result_assignment_fk FOREIGN KEY ( assignment_id )
        REFERENCES assignment ( assignment_id );

ALTER TABLE module_result
    ADD CONSTRAINT module_result_department_fk FOREIGN KEY ( student_id,
                                                             module_code )
        REFERENCES student_module ( student_id,
                                    module_code );

ALTER TABLE person_address
    ADD CONSTRAINT person_address_address_fk FOREIGN KEY ( address_id )
        REFERENCES address ( address_id );

ALTER TABLE person_address
    ADD CONSTRAINT person_address_person_fk FOREIGN KEY ( person_id )
        REFERENCES person ( person_id );

ALTER TABLE student_attendence
    ADD CONSTRAINT student_attendence_student_fk FOREIGN KEY ( student_id )
        REFERENCES student ( student_id );

ALTER TABLE student_module
    ADD CONSTRAINT student_module_module_fk FOREIGN KEY ( module_code )
        REFERENCES module ( module_code );

ALTER TABLE student_module
    ADD CONSTRAINT student_module_student_fk FOREIGN KEY ( student_id )
        REFERENCES student ( student_id );

ALTER TABLE student
    ADD CONSTRAINT student_person_fk FOREIGN KEY ( student_id )
        REFERENCES person ( person_id );

ALTER TABLE teacher_module
    ADD CONSTRAINT teacher_module_module_fk FOREIGN KEY ( module_code )
        REFERENCES module ( module_code );

ALTER TABLE teacher_module
    ADD CONSTRAINT teacher_module_teacher_fk FOREIGN KEY ( teacher_id )
        REFERENCES teacher ( teacher_id );

ALTER TABLE teacher
    ADD CONSTRAINT teacher_person_fk FOREIGN KEY ( teacher_id )
        REFERENCES person ( person_id );



-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                            13
-- CREATE INDEX                             0
-- ALTER TABLE                             27
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE MATERIALIZED VIEW LOG             0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
